<template><div><SidebarItem :title="title" :icon="icon" :active="active" :hasChildren="true" :collapsed="collapsed" @click="toggleOpen" ><template #arrow><div v-show="!collapsed" class="ml-auto flex items-center"><FontAwesomeIcon :icon="isOpen ? 'chevron-up' : 'chevron-down'" class="w-4 h-4 transition-all duration-300 transform group-hover:scale-110" :class="{ 'rotate-180 text-primary-200': isOpen && active, 'text-white/70': active, 'text-gray-500 group-hover:text-primary-500': !active}" /></div></template></SidebarItem><Transition name="slide-down" appear ><div v-if="isOpen && !collapsed" class="ml-1 mt-2 space-y-2 overflow-hidden relative"><div class="absolute left-0 top-0 bottom-0 w-px bg-gradient-to-b from-primary-300/50 via-primary-200/30 to-transparent ml-1"></div><div class="relative pl-3 space-y-1"><slot /></div></div></Transition></div></template><script setup lang="ts">import{ ref, computed, onMounted} from 'vue'import{ useRoute} from 'vue-router'import{ useSidebarStore} from '@/stores/sidebar'import SidebarItem from './SidebarItem.vue'interface Props{ title: string icon?: string basePath?: string collapsed?: boolean}const props=withDefaults(defineProps<Props>(),{ collapsed: false,})const route=useRoute()const isOpen=ref(false)const sidebarStore=useSidebarStore()const active=computed(()=>{ if (!props.basePath) return false return route.path.startsWith(props.basePath)})// Inicializar dropdown aberto se a rota atual correspondeonMounted(()=>{ if (active.value && !props.collapsed){ isOpen.value=true}})const toggleOpen=()=>{ // Se a sidebar está colapsada, abrir ela primeiro if (props.collapsed){ sidebarStore.open()} else{ // Se não está colapsada, funciona normalmente (toggle do dropdown) isOpen.value=!isOpen.value}}</script><style scoped>.slide-down-enter-active{ transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: top; overflow: hidden}.slide-down-leave-active{ transition: all 0.25s cubic-bezier(0.6, 0, 0.8, 1); transform-origin: top; overflow: hidden}.slide-down-enter-from{ opacity: 0; transform: translateY(-8px) scaleY(0.95); max-height: 0}.slide-down-enter-to{ opacity: 1; transform: translateY(0) scaleY(1); max-height: 200px}.slide-down-leave-from{ opacity: 1; transform: translateY(0) scaleY(1); max-height: 200px}.slide-down-leave-to{ opacity: 0; transform: translateY(-8px) scaleY(0.95); max-height: 0}</style>