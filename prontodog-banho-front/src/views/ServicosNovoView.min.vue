<template><div class="min-h-screen bg-gray-50"><div class="relative overflow-hidden bg-gradient-to-r from-amber-700 via-yellow-600 to-amber-800 text-white pt-16"><div class="absolute inset-0 opacity-10"><div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 animate-pulse"></div></div><div class="relative z-20 max-w-4xl mx-auto px-4 py-12"><div class="text-center space-y-4"><div class="flex justify-center mb-6"><div class="relative"><div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-3xl flex items-center justify-center shadow-2xl"><FontAwesomeIcon :icon="['fas', 'cog']" class="text-3xl text-white drop-shadow-lg transform rotate-12 animate-bounce-gentle" /></div><div class="absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg"><FontAwesomeIcon :icon="['fas', 'plus']" class="text-sm text-white animate-pulse" /></div></div></div><div class="space-y-2"><h1 class="text-4xl font-bold"><FontAwesomeIcon :icon="['fas', 'cog']" class="text-yellow-300 mr-2 animate-twinkle" />Cadastro de Servi√ßos </h1><p class="text-xl text-white opacity-90 font-medium">Registre novos servi√ßos profissionais no sistema </p></div></div></div><div class="absolute bottom-0 left-0 right-0 z-10 overflow-hidden"><svg viewBox="0 0 1440 100" class="w-full h-20" preserveAspectRatio="none"><defs><linearGradient id="waveGradientNovoServico" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#10b981;stop-opacity:0.9" /><stop offset="30%" style="stop-color:#059669;stop-opacity:0.8" /><stop offset="70%" style="stop-color:#047857;stop-opacity:0.7" /><stop offset="100%" style="stop-color:#064e3b;stop-opacity:0.6" /></linearGradient><filter id="waveShadowNovo"><feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.2"/></filter></defs><path d="M0,50 C240,30 480,70 720,50 C960,30 1200,70 1440,50 L1440,100 L0,100 Z" fill="url(#waveGradientNovoServico)" filter="url(#waveShadowNovo)" /><path d="M0,60 C360,35 600,75 960,55 C1200,35 1320,80 1440,60 L1440,100 L0,100 Z" fill="url(#waveGradientNovoServico)" opacity="0.4" /></svg></div></div><div class="max-w-4xl mx-auto px-4 py-8"><form @submit.prevent="submeterFormulario" class="space-y-8"><div class="bg-gradient-to-r from-white via-amber-50/30 to-yellow-50/20 rounded-2xl shadow-lg border border-amber-200/50 overflow-hidden animate-fade-in-up"><div class="bg-gradient-to-r from-amber-600 to-yellow-700 px-6 py-4"><h2 class="text-xl font-bold text-white flex items-center gap-3"><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center"><FontAwesomeIcon :icon="['fas', 'info-circle']" class="text-white" /></div>Informa√ß√µes do Servi√ßo </h2><p class="text-amber-100 text-sm mt-1">Dados principais do servi√ßo oferecido</p></div><div class="p-6 space-y-6"><div class="animate-slide-up"><label class="block text-sm font-medium text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'tag']" class="text-blue-600 mr-2" />Tipo de Servi√ßo * </label><div class="relative"><select v-model="formulario.tipoServico" class="w-full px-4 py-3 pr-12 border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300 bg-white appearance-none cursor-pointer hover:border-blue-400" :class="{ 'border-red-300 focus:border-red-500': erros.tipoServico}" required ><option value="">Selecione o tipo de servi√ßo</option><option value="principal">üéØ Servi√ßo Principal (com pacotes)</option><option value="adicional">‚ûï Servi√ßo Adicional (√∫nico)</option></select><div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"><FontAwesomeIcon :icon="['fas', 'chevron-down']" class="text-blue-500" /></div></div><div class="mt-2"><p v-if="formulario.tipoServico==='principal'" class="text-xs text-blue-600 flex items-center gap-1"><FontAwesomeIcon :icon="['fas', 'info-circle']" />Servi√ßos principais podem ter pacotes (ex: 4 banhos por R$ 120) </p><p v-else-if="formulario.tipoServico==='adicional'" class="text-xs text-green-600 flex items-center gap-1"><FontAwesomeIcon :icon="['fas', 'info-circle']" />Servi√ßos adicionais s√£o √∫nicos (ex: tosa, perfumaria, corte de unhas) </p></div><span v-if="erros.tipoServico" class="text-sm text-red-600">{{ erros.tipoServico}}</span></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="animate-slide-up"><label class="block text-sm font-medium text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'cog']" class="text-amber-600 mr-2" />Nome do Servi√ßo * </label><input v-model="formulario.nome" type="text" :placeholder="formulario.tipoServico==='adicional' ? 'Ex: Tosa Completa, Corte de Unhas' : 'Ex: Banho e Tosa Completa'" required class="w-full px-4 py-3 border-2 border-amber-200 rounded-xl focus:border-amber-500 focus:ring-4 focus:ring-amber-500/20 transition-all duration-300 bg-white" :class="{ 'border-red-300 focus:border-red-500': erros.nome}" ><div class="flex justify-between items-center mt-1"><span v-if="erros.nome" class="text-sm text-red-600">{{ erros.nome}}</span><span class="text-xs text-gray-500 ml-auto">Nome claro e descritivo do servi√ßo</span></div></div><div class="animate-slide-up"><label class="block text-sm font-medium text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'tags']" class="text-amber-600 mr-2" />Tipo de Servi√ßo </label><div class="relative"><select v-model="formulario.nome" class="w-full px-4 py-3 pr-12 border-2 border-amber-200 rounded-xl focus:border-amber-500 focus:ring-4 focus:ring-amber-500/20 transition-all duration-300 bg-white appearance-none cursor-pointer hover:border-amber-400" @change="preencherDescricaoAutomatica" ><option value="">Selecione um tipo de servi√ßo</option><optgroup label="üõÅ Servi√ßos √önicos"><option value="Banho Simples">Banho Simples</option><option value="Banho e Tosa">Banho e Tosa</option><option value="Tosa Higi√™nica">Tosa Higi√™nica</option><option value="Tosa Completa">Tosa Completa</option><option value="Escova√ß√£o de Pelos">Escova√ß√£o de Pelos</option><option value="Corte de Unhas">Corte de Unhas</option><option value="Limpeza de Ouvidos">Limpeza de Ouvidos</option><option value="Escova√ß√£o Dental">Escova√ß√£o Dental</option><option value="Hidrata√ß√£o">Hidrata√ß√£o</option><option value="Perfume">Perfume</option><option value="Transporte">Transporte</option></optgroup><optgroup label="üì¶ Pacotes de Banhos"><option value="Pacote Banho Simples">Pacote Banho Simples</option><option value="Pacote Banho e Tosa">Pacote Banho e Tosa</option><option value="Pacote Premium">Pacote Premium</option><option value="Pacote Completo">Pacote Completo</option></optgroup><optgroup label="‚ú® Outros"><option value="Outro">Outro</option></optgroup></select><div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"><FontAwesomeIcon :icon="['fas', 'chevron-down']" class="text-amber-500" /></div></div><p class="text-xs text-gray-500 mt-1">Selecione um tipo pr√©-definido ou digite um personalizado</p></div></div><div class="animate-slide-up"><label class="block text-sm font-medium text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'align-left']" class="text-amber-600 mr-2" />Descri√ß√£o Detalhada </label><textarea v-model="formulario.descricao" rows="4" class="w-full px-4 py-3 border-2 border-amber-200 rounded-xl focus:border-amber-500 focus:ring-4 focus:ring-amber-500/20 transition-all duration-300 bg-white resize-none" placeholder="Descreva detalhadamente o servi√ßo oferecido, incluindo o que est√° incluso..." :class="{ 'border-red-300 focus:border-red-500': erros.descricao}" /><div class="flex justify-between items-center mt-1"><span v-if="erros.descricao" class="text-sm text-red-600">{{ erros.descricao}}</span><span class="text-xs text-gray-500 ml-auto">{{ formulario.descricao.length}}/500 caracteres</span></div></div></div></div><div class="bg-gradient-to-r from-white via-green-50/30 to-emerald-50/20 rounded-2xl shadow-lg border border-green-200/50 overflow-hidden animate-fade-in-up"><div class="bg-gradient-to-r from-green-600 to-emerald-700 px-6 py-4"><h2 class="text-xl font-bold text-white flex items-center gap-3"><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center"><FontAwesomeIcon :icon="['fas', 'tags']" class="text-white" /></div>Configura√ß√£o do Pacote </h2><p class="text-green-100 text-sm mt-1">Defina se √© banho √∫nico ou pacote de banhos</p></div><div class="p-6 space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="animate-slide-up"><label class="block text-sm font-medium text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'dollar-sign']" class="text-green-600 mr-2" />Valor do Servi√ßo/Pacote * </label><div class="relative"><span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-green-600 font-medium">R$</span><input v-model="formulario.valor" type="number" step="0.01" min="0" placeholder="120,00" class="w-full pl-12 pr-4 py-3 border-2 border-green-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 transition-all duration-300 bg-white" :class="{ 'border-red-300 focus:border-red-500': erros.valor}" required ></div><div class="flex justify-between items-center mt-1"><span v-if="erros.valor" class="text-sm text-red-600">{{ erros.valor}}</span><span class="text-xs text-green-600 ml-auto" v-if="formulario.valor">Valor formatado: R${{ formatarValor(formulario.valor)}} </span></div></div><div v-if="formulario.tipoServico==='principal'" class="animate-slide-up"><label class="block text-sm font-medium text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'calculator']" class="text-green-600 mr-2" />Banhos por Pacote * </label><div class="relative"><select v-model="formulario.quantidade" class="w-full px-4 py-3 pr-12 border-2 border-green-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 transition-all duration-300 bg-white appearance-none cursor-pointer hover:border-green-400" :class="{ 'border-red-300 focus:border-red-500': erros.quantidade}" required ><optgroup label="üî∏ Servi√ßo √önico"><option value="1">1 Banho (Servi√ßo √önico)</option></optgroup><optgroup label="üì¶ Pacotes Pequenos"><option value="2">2 Banhos</option><option value="3">3 Banhos</option></optgroup><optgroup label="üèÜ Pacotes Populares"><option value="4">4 Banhos (Pacote Padr√£o)</option><option value="5">5 Banhos</option><option value="6">6 Banhos</option></optgroup><optgroup label="üíé Pacotes Grandes"><option value="8">8 Banhos</option><option value="10">10 Banhos</option></optgroup></select><div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"><FontAwesomeIcon :icon="['fas', 'chevron-down']" class="text-green-500" /></div></div><div class="flex justify-between items-center mt-1"><span v-if="erros.quantidade" class="text-sm text-red-600">{{ erros.quantidade}}</span><span class="text-xs text-gray-500 ml-auto">{{ formulario.quantidade==1 ? 'Servi√ßo √∫nico' : `Pacote de ${formulario.quantidade} banhos`}} </span></div></div><div v-if="formulario.tipoServico==='adicional'" class="animate-slide-up"><label class="block text-sm font-medium text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'tags']" class="text-purple-600 mr-2" />Categoria do Servi√ßo Adicional * </label><div class="relative"><select v-model="formulario.categoria" class="w-full px-4 py-3 pr-12 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all duration-300 bg-white appearance-none cursor-pointer hover:border-purple-400" :class="{ 'border-red-300 focus:border-red-500': erros.categoria}" required ><option value="">Selecione a categoria</option><option value="tosa">‚úÇÔ∏è Tosa (completa, higi√™nica, art√≠stica)</option><option value="estetica">üíÖ Est√©tica (unhas, pelos, limpeza)</option><option value="perfumaria">üå∏ Perfumaria (col√¥nia, hidrata√ß√£o)</option><option value="saude">üè• Sa√∫de (limpeza dental, ouvidos)</option><option value="transporte">üöó Transporte (busca e entrega)</option><option value="outros">üîß Outros servi√ßos</option></select><div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"><FontAwesomeIcon :icon="['fas', 'chevron-down']" class="text-purple-500" /></div></div><div class="mt-2"><p class="text-xs text-purple-600 flex items-center gap-1"><FontAwesomeIcon :icon="['fas', 'info-circle']" />A categoria ajuda na organiza√ß√£o e busca dos servi√ßos adicionais </p></div><span v-if="erros.categoria" class="text-sm text-red-600">{{ erros.categoria}}</span></div></div><div v-if="formulario.valor && formulario.tipoServico" class="bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4 animate-slide-up"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center"><FontAwesomeIcon :icon="['fas', 'calculator']" class="text-white" /></div><div><h4 class="font-semibold text-gray-800">{{ formulario.tipoServico==='adicional' ? 'Servi√ßo Adicional' : formulario.quantidade===1 ? 'Servi√ßo √önico' : 'Pacote de Banhos'}} </h4><p class="text-sm text-gray-600"><span v-if="formulario.tipoServico==='adicional'">Valor fixo: R${{ formatarValor(formulario.valor)}} </span><span v-else-if="formulario.quantidade===1">Valor por servi√ßo: R${{ formatarValor(formulario.valor)}} </span><span v-else>{{ formulario.quantidade}} banhos por R${{ formatarValor(formulario.valor)}} </span></p></div></div><div class="text-right"><template v-if="formulario.tipoServico==='adicional'"><div class="text-lg font-bold text-purple-600">R${{ formatarValor(formulario.valor)}} </div><div class="text-sm text-gray-500">valor adicional</div></template><template v-else-if="formulario.quantidade >1"><div class="text-lg font-bold text-blue-600">R${{ formatarValor(formulario.valor / formulario.quantidade)}} </div><div class="text-sm text-gray-500">por banho</div></template><template v-else><div class="text-lg font-bold text-green-600">R${{ formatarValor(formulario.valor)}} </div><div class="text-sm text-gray-500">valor √∫nico</div></template></div></div></div></div></div><BaseCard class="bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 animate-fade-in-up"><div class="flex gap-4"><div class="flex-shrink-0"><div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center"><FontAwesomeIcon :icon="['fas', 'info-circle']" class="text-white text-lg" /></div></div><div><h3 class="font-semibold text-blue-800 mb-2">Informa√ß√µes Importantes</h3><ul class="space-y-2 text-sm text-blue-700"><li class="flex items-center gap-2"><div class="w-1.5 h-1.5 bg-blue-500 rounded-full"></div>Todos os campos marcados com * s√£o obrigat√≥rios </li><li class="flex items-center gap-2"><div class="w-1.5 h-1.5 bg-green-500 rounded-full"></div>O valor √© o pre√ßo total do pacote/servi√ßo em reais (R$) </li><li class="flex items-center gap-2"><div class="w-1.5 h-1.5 bg-yellow-500 rounded-full"></div>"Banhos por Pacote" define quantos banhos o cliente receber√° </li><li class="flex items-center gap-2"><div class="w-1.5 h-1.5 bg-purple-500 rounded-full"></div>Selecione "1 Banho" para servi√ßos √∫nicos ou at√© 10 para pacotes </li></ul></div></div></BaseCard><div class="flex flex-col sm:flex-row gap-4 justify-end animate-fade-in-up"><RouterLink to="/servicos"><button type="button" class="w-full sm:w-auto px-8 py-3 text-lg font-medium border-2 border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50 text-gray-700 hover:text-gray-800 rounded-lg transition-all duration-300 flex items-center justify-center gap-2" ><FontAwesomeIcon :icon="['fas', 'arrow-left']" />Cancelar </button></RouterLink><BaseButton type="submit" variant="primary" :disabled="loading" class="w-full sm:w-auto bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800 px-8 py-3 text-lg font-medium shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0" ><FontAwesomeIcon v-if="loading" :icon="['fas', 'spinner']" class="mr-2 animate-spin" /><FontAwesomeIcon v-else :icon="['fas', 'save']" class="mr-2" />{{ loading ? 'Cadastrando...' : 'Cadastrar Servi√ßo'}} </BaseButton></div><div v-if="formStatus && formStatus.icon !=='check-circle'" class="animate-slide-up"><BaseCard :class="{ 'bg-gradient-to-r from-red-50 to-pink-50 border-red-200': formStatus.icon==='exclamation-triangle', 'bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200': formStatus.icon==='info-circle'}" ><div class="flex items-center gap-4"><div :class="{ 'w-12 h-12 bg-gradient-to-br from-red-500 to-pink-600 rounded-xl flex items-center justify-center': formStatus.icon==='exclamation-triangle', 'w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center': formStatus.icon==='info-circle'}" ><FontAwesomeIcon :icon="['fas', formStatus.icon]" class="text-white text-lg" /></div><div><h4 :class="{ 'font-semibold text-red-700': formStatus.icon==='exclamation-triangle', 'font-semibold text-blue-700': formStatus.icon==='info-circle'}" >{{ formStatus.title}} </h4><p :class="{ 'text-red-600': formStatus.icon==='exclamation-triangle', 'text-blue-600': formStatus.icon==='info-circle'}" >{{ formStatus.message}} </p></div></div></BaseCard></div></form></div><BaseModal v-model="mostrarSucesso" title="Servi√ßo Cadastrado!" ><div class="text-center space-y-6 p-6"><div class="relative mx-auto w-24 h-24"><div class="absolute inset-0 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse"></div><div class="relative w-24 h-24 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-2xl"><FontAwesomeIcon :icon="['fas', 'check']" class="text-3xl text-white animate-bounce" /></div><div class="absolute -inset-4 opacity-75"><div class="absolute top-2 left-2 w-2 h-2 bg-yellow-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div><div class="absolute top-4 right-3 w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.3s;"></div><div class="absolute bottom-3 left-4 w-2 h-2 bg-pink-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div><div class="absolute bottom-2 right-2 w-1.5 h-1.5 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0.4s;"></div></div></div><div><h2 class="text-2xl font-bold text-gray-800 mb-2">Servi√ßo Cadastrado com Sucesso!</h2><p class="text-gray-600 mb-6">O servi√ßo foi registrado no sistema e j√° est√° dispon√≠vel.</p></div><div v-if="servicoCriado" class="bg-gradient-to-r from-gray-50 to-green-50 rounded-xl p-4 border border-green-200"><div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm font-medium text-gray-600">Nome:</span><span class="font-semibold text-gray-800">{{ servicoCriado.nome}}</span></div><div class="flex items-center justify-between"><span class="text-sm font-medium text-gray-600">Valor:</span><span class="font-semibold text-green-600">R${{ formatarValor(servicoCriado.valor)}}</span></div><div class="flex items-center justify-between"><span class="text-sm font-medium text-gray-600">Quantidade:</span><span class="font-semibold text-blue-600">{{ servicoCriado.quantidade}} unidades</span></div><div class="flex items-center justify-between"><span class="text-sm font-medium text-gray-600">ID do Servi√ßo:</span><span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">#{{ servicoCriado.id}}</span></div></div></div><div class="flex flex-col sm:flex-row gap-3 justify-center"><BaseButton @click="adicionarOutroServico" variant="secondary" class="bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white border-0" ><FontAwesomeIcon :icon="['fas', 'plus']" class="mr-2" />Cadastrar Outro </BaseButton><BaseButton @click="voltarParaLista" variant="primary" class="bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800 border-0" ><FontAwesomeIcon :icon="['fas', 'list']" class="mr-2" />Ver Lista de Servi√ßos </BaseButton></div></div></BaseModal><div v-if="loading" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white rounded-2xl p-8 shadow-2xl max-w-sm w-full mx-4"><div class="text-center space-y-4"><div class="relative mx-auto w-16 h-16"><div class="absolute inset-0 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-2xl animate-pulse"></div><div class="relative w-16 h-16 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-2xl flex items-center justify-center shadow-xl"><FontAwesomeIcon :icon="['fas', 'cog']" class="text-2xl text-white animate-spin" /></div></div><div><h3 class="text-lg font-semibold text-gray-800">Cadastrando Servi√ßo</h3><p class="text-gray-600">Processando informa√ß√µes...</p></div></div></div></div></div></template><script setup lang="ts">import{ ref, computed, reactive, watch} from 'vue'import{ useRouter} from 'vue-router'import{ BaseCard, BaseButton, BaseInput, BaseModal} from '@/components/UI'import{ servicosService} from '@/services/api'import{ TIPOS_SERVICOS} from '@/types/api'import type{ NovoServico, ServicoCompleto} from '@/types/api'// üéØ Configura√ß√£o inicialconst router=useRouter()// üìã Estados do formul√°rioconst loading=ref(false)const mostrarSucesso=ref(false)const servicoCriado=ref<ServicoCompleto | null>(null)// üìù Dados do formul√°rioconst formulario=reactive({ nome: '', descricao: '', tipoServico: '', // 'principal' ou 'adicional' quantidade: 4, // Padr√£o: Pacote de 4 banhos valor: 0, categoria: '' // Categoria para servi√ßos adicionais})// ‚ö†Ô∏è Controle de errosconst erros=reactive({ nome: '', descricao: '', tipoServico: '', quantidade: '', valor: '', categoria: ''})// üìä Status do formul√°rioconst formStatus=ref<{ icon: string title: string message: string} | null>(null)// üí° Computed propertiesconst tiposServicos=computed(()=>TIPOS_SERVICOS)// üîß Fun√ß√µes utilit√°riasconst formatarValor=(valor: number): string=>{ return valor.toLocaleString('pt-BR',{ minimumFractionDigits: 2, maximumFractionDigits: 2})}const preencherDescricaoAutomatica=()=>{ if (!formulario.descricao && formulario.nome){ const descricoesPadrao: Record<string, string>={ // Servi√ßos √önicos 'Banho Simples': 'Banho com shampoo neutro, secagem e escova√ß√£o b√°sica.', 'Banho e Tosa': 'Banho completo, tosa higi√™nica, corte de unhas e limpeza de ouvidos.', 'Tosa Higi√™nica': 'Tosa das √°reas √≠ntimas e patas para maior higiene.', 'Tosa Completa': 'Tosa art√≠stica completa conforme padr√£o da ra√ßa ou prefer√™ncia do cliente.', 'Escova√ß√£o de Pelos': 'Escova√ß√£o profissional para remo√ß√£o de pelos mortos e desembara√ßo.', 'Corte de Unhas': 'Corte seguro das unhas com equipamento profissional.', 'Limpeza de Ouvidos': 'Limpeza e higieniza√ß√£o dos ouvidos com produtos espec√≠ficos.', 'Escova√ß√£o Dental': 'Escova√ß√£o dental para prevenir t√°rtaro e mau h√°lito.', 'Hidrata√ß√£o': 'Tratamento hidratante para pelos ressecados e pele sens√≠vel.', 'Perfume': 'Aplica√ß√£o de perfume espec√≠fico para pets de longa dura√ß√£o.', 'Transporte': 'Servi√ßo de busca e entrega do pet no domic√≠lio do cliente.', // Pacotes de Banhos 'Pacote Banho Simples': 'Pacote de m√∫ltiplos banhos simples com desconto especial.', 'Pacote Banho e Tosa': 'Pacote completo com banho e tosa, ideal para manuten√ß√£o regular.', 'Pacote Premium': 'Pacote completo com todos os servi√ßos: banho, tosa, hidrata√ß√£o e perfume.', 'Pacote Completo': 'Pacote VIP com servi√ßos completos e atendimento diferenciado.'} formulario.descricao=descricoesPadrao[formulario.nome] || ''}}const validarFormulario=(): boolean=>{ // Reset erros Object.keys(erros).forEach(key=>{ erros[key as keyof typeof erros]=''}) let valido=true // Validar tipo de servi√ßo if (!formulario.tipoServico){ erros.tipoServico='Selecione o tipo de servi√ßo' valido=false} // Validar nome if (!formulario.nome.trim()){ erros.nome='Nome do servi√ßo √© obrigat√≥rio' valido=false} else if (formulario.nome.length < 3){ erros.nome='Nome deve ter pelo menos 3 caracteres' valido=false} // Validar descri√ß√£o if (formulario.descricao.length >500){ erros.descricao='Descri√ß√£o n√£o pode exceder 500 caracteres' valido=false} // Validar quantidade - apenas para servi√ßos principais if (formulario.tipoServico==='principal'){ if (!formulario.quantidade || formulario.quantidade < 1 || formulario.quantidade >10){ erros.quantidade='Selecione entre 1 e 10 banhos por pacote' valido=false}} // Validar categoria - apenas para servi√ßos adicionais if (formulario.tipoServico==='adicional'){ if (!formulario.categoria){ erros.categoria='Selecione a categoria do servi√ßo adicional' valido=false}} // Validar valor if (!formulario.valor || formulario.valor <=0){ erros.valor='Valor deve ser maior que zero' valido=false} return valido}const limparFormulario=()=>{ formulario.nome='' formulario.descricao='' formulario.tipoServico='' formulario.quantidade=4 // Resetar para padr√£o de 4 banhos formulario.valor=0 formulario.categoria='' Object.keys(erros).forEach(key=>{ erros[key as keyof typeof erros]=''}) formStatus.value=null}// üéØ A√ß√µes principaisconst submeterFormulario=async ()=>{ if (!validarFormulario()){ formStatus.value={ icon: 'exclamation-triangle', title: 'Erro de Valida√ß√£o', message: 'Por favor, corrija os erros no formul√°rio antes de continuar.'} return} loading.value=true formStatus.value=null try{ const dadosServico: NovoServico={ nome: formulario.nome.trim(), descricao: formulario.descricao.trim(), quantidade: formulario.tipoServico==='adicional' ? 1 : Number(formulario.quantidade), valor: Number(formulario.valor), podeSerAdicional: formulario.tipoServico==='adicional', categoria: formulario.tipoServico==='adicional' ? formulario.categoria : undefined} const resultado=await servicosService.criar(dadosServico) servicoCriado.value=resultado mostrarSucesso.value=true limparFormulario()} catch (error){ console.error('‚ùå Erro ao criar servi√ßo:', error) formStatus.value={ icon: 'exclamation-triangle', title: 'Erro ao Cadastrar', message: error instanceof Error ? error.message : 'Erro inesperado ao cadastrar servi√ßo.'}} finally{ loading.value=false}}const adicionarOutroServico=()=>{ mostrarSucesso.value=false servicoCriado.value=null limparFormulario()}const voltarParaLista=()=>{ router.push('/servicos')}// üëÄ Watchers// Automaticamente ajustar quantidade quando tipo de servi√ßo mudarwatch(()=>formulario.tipoServico, (novoTipo)=>{ if (novoTipo==='adicional'){ // Servi√ßos adicionais s√£o sempre quantidade=1 formulario.quantidade=1 // Limpar categoria quando mudar para principal if (formulario.categoria){ formulario.categoria=''}} else if (novoTipo==='principal'){ // Servi√ßos principais voltam ao padr√£o de 4 banhos if (formulario.quantidade===1){ formulario.quantidade=4} // Limpar categoria quando mudar para principal formulario.categoria=''}})</script><style scoped>input[type="number"]::-webkit-outer-spin-button,input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance: none; appearance: none; margin: 0}input[type="number"]{ -moz-appearance: textfield; appearance: textfield}</style>