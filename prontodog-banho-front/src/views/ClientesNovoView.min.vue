<template><div class="min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-100"><div class="relative overflow-hidden bg-gradient-to-r from-emerald-600 via-green-600 to-emerald-700 text-white pt-16"><div class="absolute inset-0 opacity-10 bg-pattern"></div><div class="relative px-6 py-8 z-20"><div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6"><div class="flex items-center gap-4 animate-fade-in-up"><div class="relative"><div class="w-16 h-16 bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl flex items-center justify-center transform hover:scale-110 transition-all duration-300 shadow-lg"><FontAwesomeIcon icon="user-plus" class="text-2xl text-white animate-bounce-gentle" /></div><div class="absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center animate-pulse"><FontAwesomeIcon icon="plus" class="text-xs text-yellow-800" /></div></div><div class="space-y-1"><h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-emerald-100">Novo Cliente </h1><p class="text-white text-lg flex items-center gap-2 font-medium opacity-90"><FontAwesomeIcon icon="star" class="text-yellow-400 animate-twinkle mr-1" />Cadastre um novo cliente no sistema </p></div></div><div v-if="formStatus && formStatus.icon !=='check-circle'" class="flex items-center gap-3 bg-white bg-opacity-20 backdrop-blur-sm px-4 py-2 rounded-xl border border-white border-opacity-20"><FontAwesomeIcon :icon="formStatus.icon" :class="[formStatus.color, 'animate-pulse']" /><span class="text-white font-medium">{{ formStatus.message}} </span></div><button @click="voltar" class="group flex items-center gap-2 px-6 py-3 bg-white bg-opacity-20 backdrop-blur-sm text-white rounded-xl hover:bg-opacity-30 transition-all duration-300 border border-white border-opacity-20 hover:border-opacity-40 transform hover:-translate-y-1 hover:shadow-lg" ><FontAwesomeIcon icon="arrow-left" class="group-hover:-translate-x-1 transition-transform duration-300" /><span class="font-medium">Voltar</span></button></div></div><div class="absolute bottom-0 left-0 right-0 z-10"><svg viewBox="0 0 1440 60" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-15"><path d="M0 60h1440V0c-120 40-240 60-360 60S840 40 720 60s-240 0-360-60S120 40 0 60z" fill="#3b82f6"/></svg></div></div><div class="px-6 pb-8 -mt-8 relative z-10"><div class="max-w-4xl mx-auto"><div class="relative bg-white bg-opacity-80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white border-opacity-20 overflow-hidden animate-slide-up"><div v-if="salvando" class="absolute inset-0 bg-gradient-to-br from-emerald-500 to-green-600 bg-opacity-95 backdrop-blur-sm flex items-center justify-center z-50"><div class="text-center text-white"><div class="relative mb-6"><div class="w-20 h-20 border-4 border-white border-opacity-30 rounded-full animate-spin"></div><div class="absolute top-0 left-0 w-20 h-20 border-4 border-transparent border-t-white rounded-full animate-spin"></div><FontAwesomeIcon icon="user-plus" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl animate-bounce" /></div><h3 class="text-xl font-semibold mb-2">Cadastrando cliente...</h3><p class="text-white text-opacity-80">Criando perfil no sistema! ðŸ‘¤</p></div></div><form @submit.prevent="salvarCliente" class="p-8 space-y-8"><div class="bg-gradient-to-r from-emerald-50 to-green-50 rounded-2xl p-6 border border-emerald-100 transform hover:scale-[1.01] transition-all duration-300"><div class="flex items-center gap-3 mb-6"><div class="w-10 h-10 bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl flex items-center justify-center"><FontAwesomeIcon icon="user" class="text-white" /></div><h2 class="text-xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent">Dados Pessoais </h2></div><div class="grid md:grid-cols-2 gap-6"><div class="md:col-span-2"><FormInput v-model="formulario.nomeCompleto" label="Nome Completo" placeholder="JoÃ£o da Silva" icon="user" required :error="erros.nomeCompleto" hint="Digite nome e sobrenome completos" :maxLength="100" :showCount="true" autocomplete="name" @blur="validarCampo('nomeCompleto')" /></div><FormInput v-model="formulario.cpf" label="CPF" placeholder="000.000.000-00" icon="id-card" required :error="erros.cpf" hint="Documento obrigatÃ³rio para cadastro" mask="cpf" autocomplete="off" @blur="validarCampo('cpf')" /><FormInput v-model="formulario.codigoSimplesVet" label="CÃ³digo SimplesVet" placeholder="123456" icon="hashtag" required :error="erros.codigoSimplesVet" hint="CÃ³digo Ãºnico do cliente no sistema" type="number" @blur="validarCampo('codigoSimplesVet')" /></div></div><div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 transform hover:scale-[1.01] transition-all duration-300"><div class="flex items-center justify-between mb-6"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center"><FontAwesomeIcon icon="phone" class="text-white" /></div><h2 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">Telefones </h2></div><button type="button" @click="adicionarTelefone" :disabled="formulario.telefones.length >=3" class="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-1 hover:shadow-lg" ><FontAwesomeIcon icon="plus" class="animate-pulse" /><span class="font-medium">Adicionar</span></button></div><div v-if="formulario.telefones.length===0" class="text-center py-8 text-gray-500"><FontAwesomeIcon icon="phone" class="text-4xl mb-4 text-gray-300" /><p class="font-medium">Nenhum telefone adicionado</p><p class="text-sm">Clique em "Adicionar Telefone" para comeÃ§ar</p></div><div v-else class="space-y-4"><div v-for="(telefone, index) in formulario.telefones" :key="`telefone-${index}`" class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg" ><div class="flex-1"><FormInput v-model="formulario.telefones[index]!" :label="`Telefone ${index + 1}`" placeholder="(11) 99999-9999" icon="phone" :required="index===0" :error="erros.telefones?.[index] || null" :hint="index===0 ? 'Telefone principal (obrigatÃ³rio)' : 'Telefone adicional (opcional)'" mask="telefone" @blur="validarTelefone(index)" /></div><BaseButton v-if="formulario.telefones.length >1" type="button" variant="ghost" size="sm" @click="removerTelefone(index)" class="text-red-600 hover:text-red-700 mt-7" title="Remover telefone" ><FontAwesomeIcon icon="trash" /></BaseButton></div></div></div><div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-100 transform hover:scale-[1.01] transition-all duration-300"><div class="flex items-center justify-between mb-6"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center"><FontAwesomeIcon icon="envelope" class="text-white" /></div><div class="flex items-center gap-2"><h2 class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">Emails </h2><span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full">opcional</span></div></div><button type="button" @click="adicionarEmail" :disabled="formulario.emailClientes.length >=3" class="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-1 hover:shadow-lg" ><FontAwesomeIcon icon="plus" class="animate-pulse" /><span class="font-medium">Adicionar</span></button></div><div v-if="formulario.emailClientes.length===0" class="text-center py-8 text-gray-500"><FontAwesomeIcon icon="envelope" class="text-4xl mb-4 opacity-50" /><p class="text-lg font-medium mb-2">Nenhum email cadastrado</p><p class="text-sm">Clique em "Adicionar Email" para incluir endereÃ§os de email do cliente </p></div><div v-else class="space-y-4"><div v-for="(email, index) in formulario.emailClientes" :key="`email-${index}`" class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg" ><div class="flex-1"><FormInput v-model="formulario.emailClientes[index]!" :label="`Email ${index + 1}`" placeholder="exemplo@email.com" icon="at" type="email" :error="erros.emailClientes?.[index] || null" :hint="index===0 ? 'Email principal (opcional)' : 'Email adicional (opcional)'" :maxLength="100" autocomplete="email" @blur="validarEmailCliente(index)" /></div><BaseButton type="button" variant="ghost" size="sm" @click="removerEmail(index)" class="text-red-600 hover:text-red-700 mt-7" title="Remover email" ><FontAwesomeIcon icon="trash" /></BaseButton></div></div></div><div class="bg-gradient-to-r from-orange-50 to-amber-50 rounded-2xl p-6 border border-orange-100 transform hover:scale-[1.01] transition-all duration-300"><div class="flex items-center justify-between mb-6"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-gradient-to-r from-orange-500 to-amber-500 rounded-xl flex items-center justify-center"><FontAwesomeIcon icon="dog" class="text-white" /></div><h2 class="text-xl font-bold bg-gradient-to-r from-orange-600 to-amber-600 bg-clip-text text-transparent">Animais de EstimaÃ§Ã£o </h2></div><button type="button" @click="adicionarAnimal" :disabled="formulario.animais.length >=5" class="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-1 hover:shadow-lg" ><FontAwesomeIcon icon="plus" class="animate-pulse" /><span class="font-medium">Adicionar</span></button></div><div v-if="formulario.animais.length===0" class="text-center py-8 text-gray-500"><FontAwesomeIcon icon="dog" class="text-4xl mb-4 text-gray-300" /><p class="font-medium">Nenhum animal cadastrado</p><p class="text-sm">Adicione pelo menos um pet para continuar</p></div><div v-else class="space-y-6"><div v-for="(animal, index) in formulario.animais" :key="`animal-${index}`" class="p-6 bg-gradient-to-r from-primary-50 to-secondary-50 rounded-lg border border-primary-100" ><div class="flex items-center justify-between mb-4"><h3 class="font-medium text-gray-800 flex items-center gap-2"><FontAwesomeIcon icon="dog" class="text-primary-600" />Animal{{ index + 1}} </h3><BaseButton v-if="formulario.animais.length >1" type="button" variant="ghost" size="sm" @click="removerAnimal(index)" class="text-red-600 hover:text-red-700" title="Remover animal" ><FontAwesomeIcon icon="trash" /></BaseButton></div><div class="grid md:grid-cols-3 gap-4"><FormInput v-model="formulario.animais[index]!.nome" label="Nome do Animal" placeholder="Rex, Luna, etc." icon="dog" required :error="erros.animais?.[index]?.nome || null" :maxLength="50" @blur="validarAnimal(index, 'nome')" /><div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Animal <span class="text-red-500 ml-1">*</span></label><select v-model="formulario.animais[index]!.tipo" class="block w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors" :class="erros.animais?.[index]?.tipo ? 'border-red-300 text-red-900' : ''" @blur="validarAnimal(index, 'tipo')" ><option value="">Selecione o tipo</option><option v-for="tipo in TIPOS_ANIMAIS" :key="tipo" :value="tipo" >{{ tipo}} </option></select><p v-if="erros.animais?.[index]?.tipo" class="mt-1 text-xs text-red-600 flex items-center" ><FontAwesomeIcon icon="exclamation-circle" class="mr-1" />{{ erros.animais[index]?.tipo}} </p></div><FormInput v-model="formulario.animais[index]!.codigoSimplesVet" label="CÃ³digo SimplesVet" placeholder="123" icon="hashtag" required :error="erros.animais?.[index]?.codigoSimplesVet || null" type="number" hint="CÃ³digo Ãºnico do animal" @blur="validarAnimal(index, 'codigoSimplesVet')" /></div></div></div></div><div class="bg-gradient-to-r from-gray-50 to-slate-50 rounded-2xl p-6 border border-gray-100"><div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6"><div class="text-sm text-gray-600 bg-white p-4 rounded-xl border border-gray-100"><div class="flex items-center gap-2 mb-2"><FontAwesomeIcon icon="info-circle" class="text-emerald-500" /><p class="font-semibold text-gray-700">Dados obrigatÃ³rios:</p></div><ul class="space-y-1 ml-6"><li class="flex items-center gap-2"><span class="w-1.5 h-1.5 bg-emerald-400 rounded-full"></span>Nome completo, CPF e cÃ³digo SimplesVet </li><li class="flex items-center gap-2"><span class="w-1.5 h-1.5 bg-blue-400 rounded-full"></span>Pelo menos um telefone </li><li class="flex items-center gap-2"><span class="w-1.5 h-1.5 bg-orange-400 rounded-full"></span>Pelo menos um animal </li></ul></div><div class="flex flex-col sm:flex-row gap-4"><button type="button" @click="voltar" :disabled="salvando" class="group px-6 py-4 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-2xl border-2 border-gray-200 hover:border-gray-300 transform hover:-translate-y-1 hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none" ><div class="flex items-center justify-center gap-2"><FontAwesomeIcon icon="times" class="group-hover:rotate-90 transition-transform duration-300" /><span>Cancelar</span></div></button><button type="submit" :disabled="!formularioValido || salvando" class="group relative flex-1 sm:flex-none px-8 py-4 bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold rounded-2xl transform hover:-translate-y-1 hover:shadow-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none overflow-hidden min-w-48" ><div class="absolute inset-0 bg-gradient-to-r from-emerald-600 to-green-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div><div class="relative flex items-center justify-center gap-3"><FontAwesomeIcon :icon="salvando ? 'spinner' : 'save'" :class="{ 'animate-spin': salvando, 'animate-pulse': !salvando}" /><span>{{ salvando ? 'Salvando cliente...' : 'Salvar Cliente'}}</span><FontAwesomeIcon v-if="!salvando" icon="star" class="animate-twinkle" /></div><div class="absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white to-transparent opacity-20 group-hover:translate-x-full transition-transform duration-1000 ease-in-out"></div></button></div></div></div></form></div></div></div><BaseModal v-model="mostrarSucesso" size="lg"><div class="text-center p-8 bg-gradient-to-br from-emerald-50 to-green-50"><div class="relative mb-8"><div class="w-24 h-24 bg-gradient-to-r from-emerald-400 to-green-500 rounded-full flex items-center justify-center mx-auto shadow-2xl animate-bounce-gentle"><FontAwesomeIcon icon="check" class="text-4xl text-white animate-pulse" /></div><div class="absolute -inset-4 opacity-70"><div class="absolute top-0 left-4 w-3 h-3 bg-yellow-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div><div class="absolute top-2 right-6 w-2 h-2 bg-pink-400 rounded-full animate-bounce" style="animation-delay: 0.3s"></div><div class="absolute bottom-2 left-8 w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.5s"></div><div class="absolute bottom-0 right-4 w-3 h-3 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0.7s"></div></div></div><div class="space-y-4 mb-8"><h3 class="text-3xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent">ðŸŽ‰ Sucesso! ðŸŽ‰ </h3><p class="text-xl text-gray-700 font-semibold">{{ clienteCriado?.nomeCompleto}} foi cadastrado com sucesso! </p><div class="bg-white bg-opacity-60 rounded-2xl p-4 inline-block backdrop-blur-sm border border-emerald-200"><p class="text-emerald-700 flex items-center gap-2"><FontAwesomeIcon icon="id-card" class="text-emerald-500" /><span class="font-medium">ID do sistema:</span><span class="font-bold text-lg">{{ clienteCriado?.codigoClienteSistema}}</span></p></div></div><div class="flex flex-col sm:flex-row gap-4 justify-center"><BaseButton @click="adicionarOutroCliente" type="button" class="bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transform hover:-translate-y-1 transition-all duration-300 flex items-center gap-2" ><FontAwesomeIcon icon="plus" />Cadastrar outro cliente </BaseButton><BaseButton @click="voltarParaLista" type="button" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transform hover:-translate-y-1 transition-all duration-300 flex items-center gap-2" ><FontAwesomeIcon icon="list" />Ver lista de clientes </BaseButton></div></div></BaseModal></div></template><script setup lang="ts">// ðŸ“š Importsimport{ ref, computed, onMounted} from 'vue'import{ useRouter} from 'vue-router'import BaseCard from '@/components/UI/BaseCard.vue'import BaseButton from '@/components/UI/BaseButton.vue'import BaseModal from '@/components/UI/BaseModal.vue'import FormInput from '@/components/UI/FormInput.vue'import{ clientesService} from '@/services/api'import type{ FormularioCliente, NovoCliente} from '@/types/api'import{ TIPOS_ANIMAIS} from '@/types/api'import{ validarNomeCompleto, validarCpf, validarCodigoSimplesVet, validarTelefone as validarTelefoneUtil, validarEmail, validarNomeAnimal, validarTipoAnimal, limparFormatacao} from '@/utils/validations'// ðŸŽ¯ ConfiguraÃ§Ãµesconst router=useRouter()// ðŸ“Š Estado do componenteconst salvando=ref(false)const erros=ref<any>({})const formStatus=ref<{ icon: string color: string message: string} | null>(null)// ðŸŽ‰ Modal de sucessoconst mostrarSucesso=ref(false)const clienteCriado=ref<any>(null)// ðŸ“‹ Dados do formulÃ¡rioconst formulario=ref<FormularioCliente>({ nomeCompleto: '', cpf: '', codigoSimplesVet: '', telefones: [''], // Inicia com 1 telefone emailClientes: [], // Inicia vazio, email Ã© opcional animais: [ { nome: '', codigoSimplesVet: '', tipo: ''} ] // Inicia com 1 animal})// ðŸ’» Computed Propertiesconst formularioValido=computed(()=>{ return ( // Dados pessoais formulario.value.nomeCompleto.trim() && formulario.value.cpf.trim() && formulario.value.codigoSimplesVet.trim() && // Pelo menos um telefone vÃ¡lido formulario.value.telefones.some(tel=>tel.trim()) && // Pelo menos um animal com dados vÃ¡lidos formulario.value.animais.some(animal=>animal.nome.trim() && animal.tipo.trim() && animal.codigoSimplesVet.trim() ) && // Nenhum erro Object.keys(erros.value).length===0 )})// ðŸ”§ FunÃ§Ãµes de validaÃ§Ã£oconst validarCampo=(campo: keyof FormularioCliente): void=>{ switch (campo){ case 'nomeCompleto': erros.value.nomeCompleto=validarNomeCompleto(formulario.value.nomeCompleto) break case 'cpf': erros.value.cpf=validarCpf(formulario.value.cpf) break case 'codigoSimplesVet': erros.value.codigoSimplesVet=validarCodigoSimplesVet(formulario.value.codigoSimplesVet) break} // Remove erro se vÃ¡lido if (!erros.value[campo]){ delete erros.value[campo]}}const validarTelefone=(index: number): void=>{ if (!erros.value.telefones) erros.value.telefones=[] const telefone=formulario.value.telefones[index] if (telefone !==undefined){ erros.value.telefones[index]=validarTelefoneUtil(telefone)} if (!erros.value.telefones[index]){ delete erros.value.telefones[index] if (Object.keys(erros.value.telefones).length===0){ delete erros.value.telefones}}}const validarEmailCliente=(index: number): void=>{ if (!erros.value.emailClientes) erros.value.emailClientes=[] const email=formulario.value.emailClientes[index] if (email !==undefined){ erros.value.emailClientes[index]=validarEmail(email)} if (!erros.value.emailClientes[index]){ delete erros.value.emailClientes[index] if (Object.keys(erros.value.emailClientes).length===0){ delete erros.value.emailClientes}}}const validarAnimal=(index: number, campo: 'nome' | 'tipo' | 'codigoSimplesVet'): void=>{ if (!erros.value.animais) erros.value.animais=[] if (!erros.value.animais[index]) erros.value.animais[index]={} const animal=formulario.value.animais[index] if (!animal) return switch (campo){ case 'nome': erros.value.animais[index].nome=validarNomeAnimal(animal.nome) break case 'tipo': erros.value.animais[index].tipo=validarTipoAnimal(animal.tipo) break case 'codigoSimplesVet': erros.value.animais[index].codigoSimplesVet=validarCodigoSimplesVet(animal.codigoSimplesVet) break} if (!erros.value.animais[index][campo]){ delete erros.value.animais[index][campo] if (Object.keys(erros.value.animais[index]).length===0){ delete erros.value.animais[index] if (Object.keys(erros.value.animais).length===0){ delete erros.value.animais}}}}// ðŸ“ž Gerenciar telefonesconst adicionarTelefone=(): void=>{ if (formulario.value.telefones.length < 3){ formulario.value.telefones.push('')}}const removerTelefone=(index: number): void=>{ if (formulario.value.telefones.length >1){ formulario.value.telefones.splice(index, 1) // Limpa erros do telefone removido if (erros.value.telefones){ erros.value.telefones.splice(index, 1) if (erros.value.telefones.length===0){ delete erros.value.telefones}}}}// ðŸ“§ Gerenciar emailsconst adicionarEmail=(): void=>{ if (formulario.value.emailClientes.length < 3){ formulario.value.emailClientes.push('')}}const removerEmail=(index: number): void=>{ formulario.value.emailClientes.splice(index, 1) // Limpa erros do email removido if (erros.value.emailClientes){ erros.value.emailClientes.splice(index, 1) if (erros.value.emailClientes.length===0){ delete erros.value.emailClientes}}}// ðŸ• Gerenciar animaisconst adicionarAnimal=(): void=>{ if (formulario.value.animais.length < 5){ formulario.value.animais.push({ nome: '', codigoSimplesVet: '', tipo: ''})}}const removerAnimal=(index: number): void=>{ if (formulario.value.animais.length >1){ formulario.value.animais.splice(index, 1) // Limpa erros do animal removido if (erros.value.animais){ erros.value.animais.splice(index, 1) if (erros.value.animais.length===0){ delete erros.value.animais}}}}// ðŸ’¾ Salvar clienteconst salvarCliente=async (): Promise<void>=>{ try{ console.log('ðŸ“ Iniciando validaÃ§Ã£o do formulÃ¡rio...') // Limpa status anterior formStatus.value=null // Valida todos os campos validarCampo('nomeCompleto') validarCampo('cpf') validarCampo('codigoSimplesVet') formulario.value.telefones.forEach((_, index)=>validarTelefone(index)) formulario.value.animais.forEach((_, index)=>{ validarAnimal(index, 'nome') validarAnimal(index, 'tipo') validarAnimal(index, 'codigoSimplesVet')}) // Verifica se hÃ¡ erros if (!formularioValido.value){ formStatus.value={ icon: 'exclamation-circle', color: 'text-red-600', message: 'Corrija os erros antes de continuar'} return} console.log('âœ… FormulÃ¡rio vÃ¡lido! Preparando dados...') salvando.value=true // Monta o objeto para enviar Ã  API const novoCliente: NovoCliente={ nomeCompleto: formulario.value.nomeCompleto.trim(), cpf: limparFormatacao(formulario.value.cpf), codigoSimplesVet: parseInt(formulario.value.codigoSimplesVet), telefones: formulario.value.telefones .filter(tel=>tel.trim()) .map(tel=>({ telefone: limparFormatacao(tel)})), emailClientes: formulario.value.emailClientes .filter(email=>email.trim()) .map(email=>({ email: email.trim()})), animais: formulario.value.animais .filter(animal=>animal.nome.trim() && animal.tipo.trim() && animal.codigoSimplesVet.trim()) .map(animal=>({ nome: animal.nome.trim(), tipo: animal.tipo, codigoSimplesVet: parseInt(animal.codigoSimplesVet)}))} console.log('ðŸš€ Enviando dados:', novoCliente) // Chama a API const clienteSalvo=await clientesService.criar(novoCliente) console.log('ðŸŽ‰ Cliente criado com sucesso!', clienteSalvo) // Sucesso! Mostra modal de sucesso clienteCriado.value=clienteSalvo mostrarSucesso.value=true} catch (error){ console.error('âŒ Erro ao salvar cliente:', error) formStatus.value={ icon: 'exclamation-circle', color: 'text-red-600', message: error instanceof Error ? error.message : 'Erro inesperado ao salvar cliente'}} finally{ salvando.value=false}}// ðŸ”™ Voltarconst voltar=(): void=>{ if (confirm('Tem certeza que deseja sair? Os dados nÃ£o salvos serÃ£o perdidos.')){ router.push('/clientes')}}// ðŸŽ‰ FunÃ§Ãµes do modal de sucessoconst adicionarOutroCliente=(): void=>{ // Limpa o formulÃ¡rio para adicionar outro cliente formulario.value={ nomeCompleto: '', cpf: '', codigoSimplesVet: '', telefones: [''], // Inicia com 1 telefone emailClientes: [], // Inicia vazio, email Ã© opcional animais: [ { nome: '', codigoSimplesVet: '', tipo: ''} ] // Inicia com 1 animal} erros.value={} formStatus.value=null mostrarSucesso.value=false clienteCriado.value=null}const voltarParaLista=(): void=>{ router.push('/clientes')}// ðŸŽ¬ LifecycleonMounted(()=>{ console.log('ðŸŽ¬ PÃ¡gina de novo cliente carregada!')})</script><style scoped>@keyframes fade-in-up{ from{ opacity: 0; transform: translateY(20px);} to{ opacity: 1; transform: translateY(0);}}@keyframes slide-up{ from{ opacity: 0; transform: translateY(30px);} to{ opacity: 1; transform: translateY(0);}}@keyframes bounce-gentle{ 0%, 100%{ transform: translateY(0);} 50%{ transform: translateY(-5px);}}@keyframes pulse-gentle{ 0%, 100%{ opacity: 1;} 50%{ opacity: 0.8;}}@keyframes twinkle{ 0%, 100%{ opacity: 1; transform: scale(1);} 50%{ opacity: 0.5; transform: scale(0.9);}}.animate-fade-in-up{ animation: fade-in-up 0.6s ease-out}.animate-slide-up{ animation: slide-up 0.8s ease-out}.animate-bounce-gentle{ animation: bounce-gentle 2s ease-in-out infinite}.animate-pulse-gentle{ animation: pulse-gentle 2s ease-in-out infinite}.animate-twinkle{ animation: twinkle 1.5s ease-in-out infinite}.bg-pattern{ background-image: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 1px, transparent 1px), radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 1px, transparent 1px); background-size: 30px 30px}.glass{ background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2)}.hover-lift{ transition: transform 0.3s ease, box-shadow 0.3s ease}.hover-lift:hover{ transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1)}::-webkit-scrollbar{ width: 8px}::-webkit-scrollbar-track{ background: #f1f5f9; border-radius: 4px}::-webkit-scrollbar-thumb{ background: linear-gradient(45deg, #10b981, #34d399); border-radius: 4px}::-webkit-scrollbar-thumb:hover{ background: linear-gradient(45deg, #059669, #10b981)}</style>