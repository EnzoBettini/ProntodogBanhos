<template><div class="min-h-screen bg-gradient-to-br from-amber-50 via-white to-orange-100"><div class="relative overflow-hidden bg-gradient-to-r from-amber-600 via-orange-600 to-amber-700 text-white pt-16"><div class="absolute inset-0 opacity-10 bg-pattern"></div><div class="relative px-6 py-8 z-20"><div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6"><div class="flex items-center gap-4 animate-fade-in-up"><div class="relative"><div class="w-16 h-16 bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl flex items-center justify-center transform hover:scale-110 transition-all duration-300 shadow-lg"><FontAwesomeIcon icon="clipboard-list" class="text-2xl text-white animate-bounce-gentle" /></div><div v-if="!loading && animalServicos.length >0" class="absolute -top-1 -right-1 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center animate-pulse"><span class="text-xs font-bold text-yellow-800">{{ animalServicos.length}}</span></div></div><div class="space-y-1"><h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-amber-100">Animal Servi√ßos </h1><p class="text-white text-lg flex items-center gap-2 font-medium opacity-90"><FontAwesomeIcon icon="star" class="text-yellow-400 animate-twinkle mr-1" />{{ loading ? 'Carregando...' : `${animalServicosFiltrados.length} ${animalServicosFiltrados.length===1 ? 'servi√ßo encontrado' : 'servi√ßos encontrados'}`}} </p></div></div><div class="flex items-center gap-3"><button @click="carregarAnimalServicos" :disabled="loading" class="group flex items-center gap-2 px-4 py-2 bg-white bg-opacity-20 backdrop-blur-sm text-white rounded-xl hover:bg-opacity-30 transition-all duration-300 border border-white border-opacity-20 hover:border-opacity-40 transform hover:-translate-y-1 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" ><FontAwesomeIcon :icon="loading ? 'spinner' : 'refresh'" :class="{ 'animate-spin': loading, 'group-hover:rotate-180': !loading}" class="transition-transform duration-300" /><span class="font-medium">{{ loading ? 'Carregando...' : 'Atualizar'}}</span></button><button @click="$router.push('/animal-servico/novo')" class="group flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-xl hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl font-medium shadow-lg" ><FontAwesomeIcon icon="plus" class="group-hover:rotate-90 transition-transform duration-300" /><span>Novo Servi√ßo</span></button></div></div></div><div class="absolute bottom-0 left-0 right-0 z-10"><svg viewBox="0 0 1440 60" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-15"><defs><linearGradient id="animalServicoWaveGradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" /><stop offset="50%" style="stop-color:#1d4ed8;stop-opacity:1" /><stop offset="100%" style="stop-color:#1e40af;stop-opacity:1" /></linearGradient></defs><path d="M0 60h1440V0c-120 40-240 60-360 60S840 40 720 60s-240 0-360-60S120 40 0 60z" fill="url(#animalServicoWaveGradient)"/></svg></div></div><div class="relative -mt-8 px-6 pb-8 z-30"><div v-if="loading && !animalServicos.length" class="text-center py-12"><div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-amber-400 to-green-500 rounded-full mb-4 animate-spin"><FontAwesomeIcon :icon="['fas', 'spinner']" class="text-white text-2xl" /></div><p class="text-gray-600 text-lg">Carregando animal servi√ßos...</p></div><div v-else-if="error" class="text-center py-12"><div class="inline-flex items-center justify-center w-16 h-16 bg-red-500 rounded-full mb-4"><FontAwesomeIcon :icon="['fas', 'exclamation-triangle']" class="text-white text-2xl" /></div><h3 class="text-xl font-semibold text-gray-800 mb-2">Erro ao carregar</h3><p class="text-gray-600 mb-4">{{ error}}</p><BaseButton @click="carregarAnimalServicos" variant="primary"><FontAwesomeIcon :icon="['fas', 'refresh']" class="mr-2" />Tentar Novamente </BaseButton></div><div v-else-if="!animalServicos.length && !loading" class="p-12 text-center"><BaseCard class="bg-gradient-to-br from-amber-50 to-orange-50 border-0 shadow-lg"><div class="p-8"><div class="relative"><div class="w-20 h-20 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-6 animate-bounce-gentle"><FontAwesomeIcon icon="clipboard-list" class="text-3xl text-white" /></div><div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-20 h-20 bg-amber-200 rounded-2xl animate-ping opacity-20"></div></div><h3 class="text-xl font-semibold text-gray-700 mb-2">Nenhum servi√ßo encontrado</h3><p class="text-gray-500 mb-6">Que tal cadastrar o primeiro animal servi√ßo no sistema? üêæ </p><button @click="$router.push('/animal-servico/novo')" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg mx-auto font-medium" ><FontAwesomeIcon icon="plus" /><span>Cadastrar primeiro servi√ßo</span></button></div></BaseCard></div><div v-else-if="!loading && animalServicos.length >0 && animalServicosFiltrados.length===0" class="p-12 text-center"><BaseCard class="bg-gradient-to-br from-red-50 to-pink-50 border-0 shadow-lg"><div class="p-8"><div class="relative"><div class="w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 animate-bounce-gentle" :class="infoFiltroAtivo ? 'bg-gradient-to-br from-red-400 to-pink-500' : 'bg-gradient-to-br from-amber-400 to-orange-500'" ><FontAwesomeIcon :icon="infoFiltroAtivo ? 'search' : 'clipboard-list'" class="text-3xl text-white" /></div><div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-20 h-20 rounded-2xl animate-ping opacity-20" :class="infoFiltroAtivo ? 'bg-red-200' : 'bg-amber-200'" ></div></div><template v-if="infoFiltroAtivo"><h3 class="text-xl font-semibold text-gray-700 mb-2">Nenhum resultado para{{ infoFiltroAtivo.tipo.toLowerCase()}} </h3><p class="text-gray-600 mb-4">{{ infoFiltroAtivo.descricao}}</p><div class="flex items-center justify-center gap-2 px-4 py-2 bg-red-100 rounded-lg mb-6 max-w-md mx-auto"><FontAwesomeIcon :icon="infoFiltroAtivo.icone" class="text-red-600" /><code class="text-red-800 font-medium">{{ filtroTexto}}</code></div><button @click="filtroTexto=''" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-xl hover:from-red-600 hover:to-pink-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg mx-auto font-medium" ><FontAwesomeIcon icon="times" /><span>Limpar filtro de busca</span></button></template><template v-else-if="filtroExpiracao !=='todos'"><h3 class="text-xl font-semibold text-gray-700 mb-2">Nenhum pacote{{ getFiltroExpiracaoTexto()}} </h3><p class="text-gray-600 mb-4">N√£o h√° pacotes que correspondam ao filtro selecionado no momento. </p><div class="flex items-center justify-center gap-2 px-4 py-2 bg-violet-100 rounded-lg mb-6 max-w-md mx-auto"><FontAwesomeIcon :icon="['fas', 'filter']" class="text-violet-600" /><span class="text-violet-800 font-medium">Filtro:{{ getFiltroExpiracaoTexto()}}</span></div><div class="flex flex-col sm:flex-row gap-3 justify-center"><button @click="filtroExpiracao='todos'" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-500 to-purple-500 text-white rounded-xl hover:from-violet-600 hover:to-purple-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg font-medium" ><FontAwesomeIcon icon="times" /><span>Remover filtro</span></button><button @click="$router.push('/animal-servico/novo')" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg font-medium" ><FontAwesomeIcon icon="plus" /><span>Cadastrar novo</span></button></div></template><template v-else><h3 class="text-xl font-semibold text-gray-700 mb-2">Nenhum resultado encontrado </h3><p class="text-gray-600 mb-4">Nenhum animal servi√ßo corresponde aos filtros aplicados. </p><button @click="limparTodosFiltros" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-gray-500 to-slate-500 text-white rounded-xl hover:from-gray-600 hover:to-slate-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg mx-auto font-medium" ><FontAwesomeIcon icon="refresh" /><span>Limpar todos os filtros</span></button></template></div></BaseCard></div><div v-else><BaseCard class="mb-6 shadow-lg border-0 bg-white bg-opacity-90 backdrop-blur-sm animate-slide-up"><div class="p-4"><div class="flex flex-col lg:flex-row gap-4 items-center"><div class="flex-1 relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><FontAwesomeIcon icon="search" class="h-5 w-5 text-amber-400" /></div><input v-model="filtroTexto" type="text" placeholder="Digite nome ou use: #123 (ID), @animal (Animal), %pacote (Servi√ßo)..." class="w-full pl-10 pr-4 py-3 bg-gradient-to-r from-white to-amber-50 border border-amber-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all duration-300 placeholder-gray-400 text-gray-700 shadow-sm" /></div><div v-if="filtroTexto && !loading" class="w-full lg:w-auto"><div class="flex flex-wrap items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-100"><FontAwesomeIcon icon="lightbulb" class="text-amber-500 text-sm" /><span class="text-xs text-amber-700 font-medium">Filtros:</span><div class="flex flex-wrap gap-2 text-xs"><span class="px-2 py-1 bg-white bg-opacity-60 rounded-md text-amber-700"><FontAwesomeIcon icon="hashtag" class="mr-1" /><code>#123</code>=ID </span><span class="px-2 py-1 bg-white bg-opacity-60 rounded-md text-amber-700"><FontAwesomeIcon icon="at" class="mr-1" /><code>@Rex</code>=Animal </span><span class="px-2 py-1 bg-white bg-opacity-60 rounded-md text-amber-700"><FontAwesomeIcon icon="percent" class="mr-1" /><code>%Pacote</code>=Servi√ßo </span><span class="px-2 py-1 bg-white bg-opacity-60 rounded-md text-amber-700"><FontAwesomeIcon icon="user" class="mr-1" /><code>Maria</code>=Dono </span></div></div></div><div class="relative"><select v-model="filtroExpiracao" class="px-4 py-3 bg-white border-2 border-violet-200 rounded-xl focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-all duration-300 text-gray-700 font-medium shadow-sm appearance-none pr-10" :class="{ 'border-red-300 bg-red-50 text-red-700': filtroExpiracao==='vencidos', 'border-yellow-300 bg-yellow-50 text-yellow-700': filtroExpiracao==='vencendo', 'border-green-300 bg-green-50 text-green-700': filtroExpiracao==='validos', 'border-gray-300 bg-gray-50 text-gray-700': filtroExpiracao==='sem-expiracao'}" ><option value="todos">üìã Todos ({{ contadoresExpiracao.total}})</option><option value="vencidos" :class="{ 'text-red-700 font-bold': contadoresExpiracao.vencidos >0}">üö® Pacotes Vencidos ({{ contadoresExpiracao.vencidos}}) </option><option value="vencendo" :class="{ 'text-yellow-700 font-bold': contadoresExpiracao.vencendo >0}">‚è∞ Pacotes Vencendo ({{ contadoresExpiracao.vencendo}}) </option><option value="validos">üü¢ Pacotes V√°lidos ({{ contadoresExpiracao.validos}})</option><option value="sem-expiracao">üìÖ Banhos √önicos + Sem Data ({{ contadoresExpiracao.semExpiracao}})</option></select><div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"><FontAwesomeIcon :icon="['fas', 'chevron-down']" class="text-gray-400 text-sm" /></div></div><div class="flex items-center gap-3 flex-wrap"><div v-if="infoFiltroAtivo" class="flex items-center gap-2 px-4 py-2 rounded-full shadow-sm border-2 animate-pulse" :class="{ 'bg-blue-50 border-blue-200 text-blue-700': infoFiltroAtivo.cor==='blue', 'bg-green-50 border-green-200 text-green-700': infoFiltroAtivo.cor==='green', 'bg-purple-50 border-purple-200 text-purple-700': infoFiltroAtivo.cor==='purple', 'bg-amber-50 border-amber-200 text-amber-700': infoFiltroAtivo.cor==='amber'}" ><FontAwesomeIcon :icon="infoFiltroAtivo.icone" class="text-sm" /><span class="text-sm font-bold">{{ infoFiltroAtivo.tipo}}</span><code class="text-xs bg-white bg-opacity-60 px-1.5 py-0.5 rounded">{{ infoFiltroAtivo.valor}}</code></div><div class="flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-amber-100 to-orange-100 rounded-full"><FontAwesomeIcon icon="clipboard-list" class="text-amber-600 text-sm" /><span class="text-sm font-medium text-amber-700">{{ animalServicosFiltrados.length}} encontrados</span></div><div v-if="!infoFiltroAtivo" class="flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full"><FontAwesomeIcon icon="calendar-days" class="text-blue-600 text-sm" /><span class="text-sm font-medium text-blue-700">{{ totalServicosAtivos}} ativos</span></div></div></div></div></BaseCard><div ref="listaAnimalServicosRef" class="space-y-4"><div v-for="(animalServico, index) in animalServicosFiltrados" :key="animalServico.id" class="group relative rounded-xl shadow-lg hover:shadow-2xl transform transition-all duration-300 hover:-translate-y-1 animate-fade-in-up overflow-hidden border-2" :class="{ // üö® Card urgente - vencido (apenas para pacotes) 'bg-gradient-to-r from-red-50 via-red-50 to-red-100 border-red-200 animate-pulse animate-urgent-glow': getTotalBanhos(animalServico) >1 && getExpirationStatus(animalServico)==='vencido', // ‚ö†Ô∏è Card aten√ß√£o - vencendo (apenas pacotes) ou poucos banhos 'bg-gradient-to-r from-yellow-50 via-yellow-50 to-yellow-100 border-yellow-200': (getTotalBanhos(animalServico) >1 && getExpirationStatus(animalServico)==='vencendo') || (!isServicoCompleto(animalServico) && getBanhosRestantes(animalServico) <=1), // ‚úÖ Card completo 'bg-gradient-to-r from-green-50 via-green-50 to-green-100 border-green-200': isServicoCompleto(animalServico), // üîµ Card normal (incluindo banhos √∫nicos v√°lidos) 'bg-gradient-to-r from-white via-white to-amber-50 border-gray-200': !isServicoCompleto(animalServico) && (getTotalBanhos(animalServico)===1 || (getTotalBanhos(animalServico) >1 && getExpirationStatus(animalServico)==='valido' && getBanhosRestantes(animalServico) >1)), // üìÖ Card sem expira√ß√£o (apenas para pacotes) 'bg-gradient-to-r from-slate-50 via-slate-50 to-gray-100 border-slate-200': getTotalBanhos(animalServico) >1 && getExpirationStatus(animalServico)==='sem-expiracao'}" :style="{ animationDelay: `${index * 100}ms`}" ><div class="p-6"><div class="flex items-center justify-between"><div class="flex items-center gap-4 flex-1"><div class="relative"><div class="w-16 h-16 bg-gradient-to-br from-amber-400 to-green-600 rounded-2xl flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-all duration-300"><FontAwesomeIcon :icon="['fas', 'clipboard-list']" class="text-2xl text-white" /></div><div class="absolute -top-1 -right-1 w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-md"><span class="text-xs font-bold text-white">{{ animalServico.banhosUsados}}</span></div></div><div class="flex-1 min-w-0"><div class="flex items-center gap-3 mb-1"><h3 class="text-xl font-bold text-gray-900 truncate group-hover:text-amber-700 transition-colors duration-300">{{ getAnimalNome(animalServico)}} </h3><div class="flex items-center gap-2 flex-shrink-0 flex-wrap"><div class="px-3 py-1 rounded-full text-xs font-bold shadow-sm border-2 transition-all duration-300" :class="{ 'bg-green-100 border-green-300 text-green-800': isServicoCompleto(animalServico), 'bg-blue-100 border-blue-300 text-blue-800': !isServicoCompleto(animalServico)}" ><FontAwesomeIcon :icon="isServicoCompleto(animalServico) ? 'check-circle' : 'clock'" class="mr-1" />{{ isServicoCompleto(animalServico) ? 'COMPLETO' : 'EM ANDAMENTO'}} </div><div v-if="!isServicoCompleto(animalServico)" class="px-2 py-1 rounded-full text-xs font-bold shadow-sm border-2 transition-all duration-300" :class="{ 'bg-red-100 border-red-300 text-red-800 animate-pulse': getBanhosRestantes(animalServico) <=1, 'bg-yellow-100 border-yellow-300 text-yellow-800': getBanhosRestantes(animalServico)===2, 'bg-emerald-100 border-emerald-300 text-emerald-800': getBanhosRestantes(animalServico) >2}" ><FontAwesomeIcon icon="bath" class="mr-1" />{{ getBanhosRestantes(animalServico)}} restante{{ getBanhosRestantes(animalServico) !==1 ? 's' : ''}} </div><div class="px-2 py-1 rounded-full text-xs font-bold bg-gray-100 border-2 border-gray-300 text-gray-700 shadow-sm"><FontAwesomeIcon :icon="getTotalBanhos(animalServico) >1 ? 'box' : 'droplet'" class="mr-1" />{{ getServicoDescricao(animalServico)}} </div><div v-if="animalServico.dataExpiracao && getTotalBanhos(animalServico) >1" class="px-2 py-1 rounded-full text-xs font-bold shadow-sm border-2 transition-all duration-300" :class="{ 'bg-red-100 border-red-300 text-red-800 animate-bounce': getExpirationStatus(animalServico)==='vencido', 'bg-yellow-100 border-yellow-300 text-yellow-800 animate-pulse': getExpirationStatus(animalServico)==='vencendo', 'bg-green-100 border-green-300 text-green-800': getExpirationStatus(animalServico)==='valido'}" ><span v-if="getExpirationStatus(animalServico)==='vencido'">üö® VENCIDO h√°{{ getDaysExpired(animalServico)}}d </span><span v-else-if="getExpirationStatus(animalServico)==='vencendo'">‚è∞{{ getDaysUntilExpiration(animalServico)}}d restantes </span><span v-else>üü¢{{ getDaysUntilExpiration(animalServico)}}d restantes </span></div></div></div><div class="flex items-center gap-4 text-sm text-gray-600 mb-2 flex-wrap"><span class="flex items-center gap-1"><FontAwesomeIcon icon="hashtag" class="text-gray-400" />ID:{{ animalServico.id}} </span><span class="flex items-center gap-1"><FontAwesomeIcon icon="calendar-alt" class="text-gray-400" />{{ formatarData(animalServico.dataServico)}} </span><span class="flex items-center gap-1"><FontAwesomeIcon icon="user" class="text-emerald-500" /><span class="text-emerald-700 font-medium">{{ getClienteNome(animalServico)}}</span></span></div><div class="flex items-center gap-3"><div class="flex-1 bg-gray-200 rounded-full h-3 shadow-inner"><div class="h-3 rounded-full transition-all duration-700 ease-out" :class="{ 'bg-gradient-to-r from-green-400 to-emerald-500': isServicoCompleto(animalServico), 'bg-gradient-to-r from-red-400 to-red-500 animate-pulse': !isServicoCompleto(animalServico) && getBanhosRestantes(animalServico) <=1, 'bg-gradient-to-r from-yellow-400 to-orange-500': !isServicoCompleto(animalServico) && getBanhosRestantes(animalServico)===2, 'bg-gradient-to-r from-blue-400 to-indigo-500': !isServicoCompleto(animalServico) && getBanhosRestantes(animalServico) >2}" :style="{ width: `${getProgressoBanhos(animalServico)}%`}" ><div class="h-full rounded-full bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div></div></div><div class="flex items-center gap-2"><span class="text-sm font-bold text-gray-700">{{ animalServico.banhosUsados}}/{{ getTotalBanhos(animalServico)}} </span><span class="text-xs text-gray-500">‚Ä¢</span><span class="text-xs font-medium" :class="{ 'text-red-600': !isServicoCompleto(animalServico) && getBanhosRestantes(animalServico) <=1, 'text-yellow-600': !isServicoCompleto(animalServico) && getBanhosRestantes(animalServico)===2, 'text-blue-600': !isServicoCompleto(animalServico) && getBanhosRestantes(animalServico) >2, 'text-green-600': isServicoCompleto(animalServico)}" >{{ Math.round(getProgressoBanhos(animalServico))}}% </span></div></div></div></div><div class="flex items-center gap-3 ml-4"><BaseBadge :variant="isServicoCompleto(animalServico) ? 'success' : 'warning'" size="md" >{{ isServicoCompleto(animalServico) ? 'Completo' : 'Em Andamento'}} </BaseBadge><div class="flex items-center gap-3"><button @click.stop="verDetalhesAnimalServico(animalServico)" class="group/btn flex items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all duration-200 transform hover:scale-105" title="Ver detalhes do animal servi√ßo" ><FontAwesomeIcon :icon="['fas', 'eye']" class="text-sm" /><span class="text-xs font-medium hidden sm:inline">Ver</span></button><button @click.stop="confirmarExclusao(animalServico)" class="group/btn flex items-center gap-2 px-3 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 transform hover:scale-105" title="Excluir animal servi√ßo" ><FontAwesomeIcon :icon="['fas', 'trash']" class="text-sm" /><span class="text-xs font-medium hidden sm:inline">Excluir</span></button></div></div></div></div></div></div><div v-if="temMaisItens" class="text-center mt-8"><div class="bg-white rounded-xl p-6 shadow-lg border border-gray-100 max-w-md mx-auto"><div class="mb-4"><p class="text-gray-600 text-sm mb-2">Mostrando <span class="font-semibold text-blue-600">{{ animalServicosFiltrados.length}}</span>de <span class="font-semibold text-gray-800">{{ totalItensDisponiveis}}</span>registros </p><div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-gradient-to-r from-amber-400 to-green-500 h-2 rounded-full transition-all duration-500" :style="{ width: `${(animalServicosFiltrados.length / totalItensDisponiveis) * 100}%`}" ></div></div></div><BaseButton @click="carregarMaisItens" variant="primary" class="px-8 py-3 text-lg w-full" :disabled="loading" ><FontAwesomeIcon v-if="loading" :icon="['fas', 'spinner']" class="mr-2 animate-spin" /><FontAwesomeIcon v-else :icon="['fas', 'plus-circle']" class="mr-2" />{{ loading ? 'Carregando...' : `Carregar mais ${proximosItens} ${proximosItens===1 ? 'registro' : 'registros'}`}} </BaseButton></div></div></div></div><BaseModal v-model="mostrarModalBanho" size="md" title="Adicionar Banho Individual"><div v-if="animalServicoSelecionado" class="space-y-6"><div class="bg-gradient-to-r from-amber-50 to-green-50 rounded-xl p-4 border border-amber-200"><h4 class="font-semibold text-gray-800 mb-2">Servi√ßo Selecionado</h4><div class="space-y-1 text-sm"><p><strong>Animal:</strong>{{ getAnimalNome(animalServicoSelecionado)}}</p><p><strong>Servi√ßo:</strong>{{ getServicoNome(animalServicoSelecionado)}}</p><p><strong>Banhos usados:</strong>{{ animalServicoSelecionado.banhosUsados}}/{{ getTotalBanhos(animalServicoSelecionado)}}</p></div></div><div class="space-y-4"><div><label class="block text-sm font-semibold text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'calendar-alt']" class="mr-2 text-blue-600" />Data do Banho * </label><input v-model="formularioBanho.dataBanho" type="date" required class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-300 text-lg font-medium hover:border-gray-300" /></div><div><label class="block text-sm font-semibold text-gray-700 mb-2"><FontAwesomeIcon :icon="['fas', 'align-left']" class="mr-2 text-green-600" />Observa√ß√µes </label><textarea v-model="formularioBanho.observacoes" placeholder="Observa√ß√µes sobre este banho (opcional)..." rows="3" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-100 transition-all duration-300 resize-none hover:border-gray-300" ></textarea></div></div><div class="flex flex-col sm:flex-row gap-3 pt-4 border-t"><BaseButton @click="mostrarModalBanho=false" variant="ghost" class="flex-1" :disabled="salvandoBanho" >Cancelar </BaseButton><BaseButton @click="salvarBanhoIndividual" variant="primary" class="flex-1" :disabled="salvandoBanho || !formularioBanho.dataBanho" ><FontAwesomeIcon v-if="salvandoBanho" :icon="['fas', 'spinner']" class="mr-2 animate-spin" /><FontAwesomeIcon v-else :icon="['fas', 'plus-circle']" class="mr-2" />{{ salvandoBanho ? 'Salvando...' : 'Registrar Banho'}} </BaseButton></div></div></BaseModal><div class="fixed bottom-0 left-0 right-0 w-full overflow-hidden z-10 pointer-events-none"><svg viewBox="0 0 1440 120" class="w-full h-20 md:h-24" preserveAspectRatio="none" ><defs><linearGradient id="animalServicoWave" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#F59E0B;stop-opacity:0.9" /><stop offset="25%" style="stop-color:#FBBF24;stop-opacity:0.8" /><stop offset="50%" style="stop-color:#10B981;stop-opacity:0.8" /><stop offset="75%" style="stop-color:#059669;stop-opacity:0.9" /><stop offset="100%" style="stop-color:#047857;stop-opacity:1" /></linearGradient><filter id="waveShadow" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="-4" stdDeviation="8" flood-color="#000000" flood-opacity="0.15"/></filter></defs><path d="M0,60 C120,45 240,30 360,45 C480,60 600,75 720,60 C840,45 960,30 1080,45 C1200,60 1320,75 1440,60 L1440,120 L0,120 Z" fill="url(#animalServicoWave)" filter="url(#waveShadow)" /><path d="M0,80 C150,65 300,50 450,65 C600,80 750,95 900,80 C1050,65 1200,50 1350,65 C1400,70 1420,75 1440,80 L1440,120 L0,120 Z" fill="url(#animalServicoWave)" opacity="0.6" /></svg></div></div></template><style scoped>@keyframes fade-in-up{ from{ opacity: 0; transform: translateY(20px);} to{ opacity: 1; transform: translateY(0);}}@keyframes slide-up{ from{ opacity: 0; transform: translateY(30px);} to{ opacity: 1; transform: translateY(0);}}@keyframes bounce-gentle{ 0%, 100%{ transform: translateY(0);} 50%{ transform: translateY(-5px);}}@keyframes twinkle{ 0%, 100%{ opacity: 1; transform: scale(1);} 50%{ opacity: 0.5; transform: scale(0.9);}}@keyframes shimmer{ 0%{ transform: translateX(-100%);} 100%{ transform: translateX(100%);}}@keyframes urgent-glow{ 0%, 100%{ box-shadow: 0 0 5px rgba(239, 68, 68, 0.3);} 50%{ box-shadow: 0 0 20px rgba(239, 68, 68, 0.6), 0 0 30px rgba(239, 68, 68, 0.4);}}.animate-fade-in-up{ animation: fade-in-up 0.6s ease-out}.animate-slide-up{ animation: slide-up 0.8s ease-out}.animate-bounce-gentle{ animation: bounce-gentle 2s ease-in-out infinite}.animate-twinkle{ animation: twinkle 1.5s ease-in-out infinite}.animate-shimmer{ animation: shimmer 2s ease-in-out infinite}.animate-urgent-glow{ animation: urgent-glow 2s ease-in-out infinite}.bg-pattern{ background-image: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 1px, transparent 1px), radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 1px, transparent 1px); background-size: 30px 30px}</style><script setup lang="ts">import{ ref, computed, onMounted, watch} from 'vue'import{ useRouter} from 'vue-router'import{ FontAwesomeIcon} from '@fortawesome/vue-fontawesome'import BaseCard from '@/components/UI/BaseCard.vue'import BaseButton from '@/components/UI/BaseButton.vue'import BaseInput from '@/components/UI/BaseInput.vue'import BaseModal from '@/components/UI/BaseModal.vue'import BaseBadge from '@/components/UI/BaseBadge.vue'import{ animalServicoService, animaisService, servicosService, usuariosService, banhosIndividuaisService, clientesService, type NovoBanhoIndividual} from '@/services/api'import type{ AnimalServico, Animal, ServicoCompleto, Usuario} from '@/types/api'const router=useRouter()// üìä Estados reativasconst loading=ref(false)const error=ref('')const animalServicos=ref<AnimalServico[]>([])const animais=ref<Animal[]>([])const servicos=ref<ServicoCompleto[]>([])const usuarios=ref<Usuario[]>([])// üìã Estados do modal de banhoconst mostrarModalBanho=ref(false)const salvandoBanho=ref(false)const animalServicoSelecionado=ref<AnimalServico | null>(null)const formularioBanho=ref({ dataBanho: '', observacoes: ''})// üîç Filtrosconst filtroTexto=ref('')const filtroExpiracao=ref('todos') // 'todos', 'vencidos', 'vencendo', 'validos', 'sem-expiracao'const itensPorPagina=ref(10)const itensExibidos=ref(10)// üóìÔ∏è Fun√ß√µes para determinar status de expira√ß√£o (apenas para pacotes)const getExpirationStatus=(animalServico: AnimalServico): 'vencido' | 'vencendo' | 'valido' | 'sem-expiracao'=>{ // Banhos √∫nicos n√£o t√™m controle de expira√ß√£o if (getTotalBanhos(animalServico)===1) return 'sem-expiracao' if (!animalServico.dataExpiracao) return 'sem-expiracao' const hoje=new Date() const [ano, mes, dia]=animalServico.dataExpiracao.split('-') const dataExpiracao=new Date(Number(ano), Number(mes) - 1, Number(dia)) if (hoje >dataExpiracao){ return 'vencido'} const diasParaExpirar=Math.ceil((dataExpiracao.getTime() - hoje.getTime()) / (1000 * 60 * 60 * 24)) if (diasParaExpirar <=7){ return 'vencendo'} return 'valido'}const getDaysUntilExpiration=(animalServico: AnimalServico): number=>{ if (!animalServico.dataExpiracao) return 0 const hoje=new Date() const [ano, mes, dia]=animalServico.dataExpiracao.split('-') const dataExpiracao=new Date(Number(ano), Number(mes) - 1, Number(dia)) return Math.ceil((dataExpiracao.getTime() - hoje.getTime()) / (1000 * 60 * 60 * 24))}const getDaysExpired=(animalServico: AnimalServico): number=>{ if (!animalServico.dataExpiracao) return 0 const hoje=new Date() const [ano, mes, dia]=animalServico.dataExpiracao.split('-') const dataExpiracao=new Date(Number(ano), Number(mes) - 1, Number(dia)) return Math.abs(Math.ceil((hoje.getTime() - dataExpiracao.getTime()) / (1000 * 60 * 60 * 24)))}// üìÑ Lista com filtros inteligentes aplicadosconst animalServicosFiltrados=computed(()=>{ return animalServicos.value.filter(animalServico=>{ // üóìÔ∏è FILTRO DE EXPIRA√á√ÉO if (filtroExpiracao.value !=='todos'){ const status=getExpirationStatus(animalServico) if (filtroExpiracao.value==='vencidos' && status !=='vencido') return false if (filtroExpiracao.value==='vencendo' && status !=='vencendo') return false if (filtroExpiracao.value==='validos' && status !=='valido') return false if (filtroExpiracao.value==='sem-expiracao' && status !=='sem-expiracao') return false} // üîç FILTRO DE TEXTO if (!filtroTexto.value) return true // üß† FILTROS INTELIGENTES com prefixos especiais const termoBusca=filtroTexto.value.trim() // üöÄ FILTRO INTELIGENTE: Detecta prefixos especiais if (termoBusca.startsWith('#')){ // üÜî Busca por ID do Servi√ßo: #123 const idBusca=termoBusca.substring(1) if (idBusca){ return animalServico.id.toString().includes(idBusca)} else{ return true // Se apenas # foi digitado, mostra todos}} else if (termoBusca.startsWith('@')){ // üêï Busca por Nome do Animal: @Rex const animalBusca=termoBusca.substring(1) if (animalBusca){ const animalNome=getAnimalNome(animalServico).toLowerCase() return animalNome.includes(animalBusca.toLowerCase())} else{ return true // Se apenas @ foi digitado, mostra todos}} else if (termoBusca.startsWith('%')){ // üéØ Busca por Tipo de Servi√ßo: %Pacote const servicoBusca=termoBusca.substring(1) if (servicoBusca){ const servicoNome=getServicoNome(animalServico).toLowerCase() const servicoDescricao=getServicoDescricao(animalServico).toLowerCase() return servicoNome.includes(servicoBusca.toLowerCase()) || servicoDescricao.includes(servicoBusca.toLowerCase())} else{ return true // Se apenas % foi digitado, mostra todos}} else{ // üîç BUSCA NORMAL: Por nome do dono const termoBuscaLower=termoBusca.toLowerCase() // üë§ Busca por nome do cliente (dono) const clienteNome=getClienteNome(animalServico).toLowerCase() return clienteNome.includes(termoBuscaLower)}}).slice(0, itensExibidos.value)})// üìä Controle de pagina√ß√£oconst totalItensDisponiveis=computed(()=>{ return animalServicos.value.filter(animalServico=>{ // üóìÔ∏è FILTRO DE EXPIRA√á√ÉO if (filtroExpiracao.value !=='todos'){ const status=getExpirationStatus(animalServico) if (filtroExpiracao.value==='vencidos' && status !=='vencido') return false if (filtroExpiracao.value==='vencendo' && status !=='vencendo') return false if (filtroExpiracao.value==='validos' && status !=='valido') return false if (filtroExpiracao.value==='sem-expiracao' && status !=='sem-expiracao') return false} // üîç FILTRO DE TEXTO if (!filtroTexto.value) return true const termoBusca=filtroTexto.value.trim() if (termoBusca.startsWith('#')){ const idBusca=termoBusca.substring(1) if (idBusca){ return animalServico.id.toString().includes(idBusca)} else{ return true}} else if (termoBusca.startsWith('@')){ const animalBusca=termoBusca.substring(1) if (animalBusca){ const animalNome=getAnimalNome(animalServico).toLowerCase() return animalNome.includes(animalBusca.toLowerCase())} else{ return true}} else if (termoBusca.startsWith('%')){ const servicoBusca=termoBusca.substring(1) if (servicoBusca){ const servicoNome=getServicoNome(animalServico).toLowerCase() const servicoDescricao=getServicoDescricao(animalServico).toLowerCase() return servicoNome.includes(servicoBusca.toLowerCase()) || servicoDescricao.includes(servicoBusca.toLowerCase())} else{ return true}} else{ const termoBuscaLower=termoBusca.toLowerCase() const clienteNome=getClienteNome(animalServico).toLowerCase() return clienteNome.includes(termoBuscaLower)}}).length})// üìä Contadores por status de expira√ß√£oconst contadoresExpiracao=computed(()=>{ const contadores={ total: animalServicos.value.length, vencidos: 0, vencendo: 0, validos: 0, semExpiracao: 0} animalServicos.value.forEach(animalServico=>{ const status=getExpirationStatus(animalServico) switch (status){ case 'vencido': contadores.vencidos++ break case 'vencendo': contadores.vencendo++ break case 'valido': contadores.validos++ break case 'sem-expiracao': contadores.semExpiracao++ break}}) return contadores})const temMaisItens=computed(()=>{ return totalItensDisponiveis.value >itensExibidos.value})const proximosItens=computed(()=>{ const restantes=totalItensDisponiveis.value - itensExibidos.value return Math.min(restantes, itensPorPagina.value)})// üéØ Informa√ß√µes sobre o filtro ativoconst infoFiltroAtivo=computed(()=>{ const termo=filtroTexto.value?.trim() if (!termo) return null if (termo.startsWith('#')){ const id=termo.substring(1) return{ tipo: 'ID Servi√ßo', icone: 'hashtag', cor: 'blue', valor: id || '...', descricao: id ? `Buscando ID do servi√ßo: ${id}` : 'Digite o ID do servi√ßo ap√≥s #'}} else if (termo.startsWith('@')){ const animal=termo.substring(1) return{ tipo: 'Nome Animal', icone: 'at', cor: 'green', valor: animal || '...', descricao: animal ? `Buscando animal: ${animal}` : 'Digite o nome do animal ap√≥s @'}} else if (termo.startsWith('%')){ const servico=termo.substring(1) return{ tipo: 'Tipo Servi√ßo', icone: 'percent', cor: 'purple', valor: servico || '...', descricao: servico ? `Buscando servi√ßo: ${servico}` : 'Digite o tipo de servi√ßo ap√≥s %'}} else{ return{ tipo: 'Nome Dono', icone: 'user', cor: 'amber', valor: termo, descricao: `Buscando por dono: "${termo}"`}}})// üìä Total de servi√ßos ativos (n√£o completos)const totalServicosAtivos=computed(()=>{ return animalServicos.value.filter(animalServico=>!isServicoCompleto(animalServico)).length})// üóìÔ∏è Fun√ß√£o para obter texto descritivo do filtro de expira√ß√£oconst getFiltroExpiracaoTexto=(): string=>{ switch (filtroExpiracao.value){ case 'vencidos': return 'pacotes vencidos' case 'vencendo': return 'pacotes vencendo em breve' case 'validos': return 'pacotes v√°lidos' case 'sem-expiracao': return 'banhos √∫nicos e servi√ßos sem data de expira√ß√£o' default: return ''}}// üßπ Fun√ß√£o para limpar todos os filtrosconst limparTodosFiltros=(): void=>{ filtroTexto.value='' filtroExpiracao.value='todos'}// üîß Fun√ß√µes auxiliares - Busca reversa devido ao @JsonBackReferenceconst getAnimalNome=(animalServico: AnimalServico): string=>{ // Busca reversa: procura o animal que tem este animalServico const animal=animais.value.find(a=>a.servicos?.some(servico=>servico.id===animalServico.id) ) return animal?.nome || `Animal (ID: ${animalServico.id})`}const getAnimalCompleto=(animalServico: AnimalServico): Animal | null=>{ // Busca reversa: procura o animal que tem este animalServico return animais.value.find(a=>a.servicos?.some(servico=>servico.id===animalServico.id) ) || null}const getClienteNome=(animalServico: AnimalServico): string=>{ // Busca reversa: procura o animal que tem este animalServico, depois pega o cliente const animal=getAnimalCompleto(animalServico) return animal?.cliente?.nomeCompleto || `Dono n√£o encontrado (ID: ${animalServico.id})`}const getServicoNome=(animalServico: AnimalServico): string=>{ // Busca reversa: procura o servi√ßo que tem este animalServico const servico=servicos.value.find(s=>s.servicosAnimais?.some(as=>as.id===animalServico.id) ) return servico?.nome || `Servi√ßo (ID: ${animalServico.id})`}const getServicoCompleto=(animalServico: AnimalServico): ServicoCompleto | null=>{ // Busca reversa: procura o servi√ßo que tem este animalServico return servicos.value.find(s=>s.servicosAnimais?.some(as=>as.id===animalServico.id) ) || null}const getServicoDescricao=(animalServico: AnimalServico): string=>{ const servico=getServicoCompleto(animalServico) if (!servico) return 'N/A' return servico.quantidade >1 ? `Pacote (${servico.quantidade} banhos)` : 'Banho √önico'}const getUsuarioNome=(animalServico: AnimalServico): string=>{ // Busca reversa: procura o usu√°rio que tem este animalServico const usuario=usuarios.value.find(u=>u.animalServicos?.some(as=>as.id===animalServico.id) ) return usuario?.nome || 'Vendedor'}const getTotalBanhos=(animalServico: AnimalServico): number=>{ const servico=getServicoCompleto(animalServico) return servico?.quantidade || 1}const getProgressoBanhos=(animalServico: AnimalServico): number=>{ const total=getTotalBanhos(animalServico) return Math.min((animalServico.banhosUsados / total) * 100, 100)}const getBanhosRestantes=(animalServico: AnimalServico): number=>{ const total=getTotalBanhos(animalServico) return Math.max(total - animalServico.banhosUsados, 0)}const podeAdicionarBanho=(animalServico: AnimalServico): boolean=>{ const total=getTotalBanhos(animalServico) return animalServico.banhosUsados < total}const isServicoCompleto=(animalServico: AnimalServico): boolean=>{ const total=getTotalBanhos(animalServico) return animalServico.banhosUsados >=total}const formatarData=(data: string): string=>{ if (!data) return '' try{ // Parse seguro: evitar timezone UTC const [ano, mes, dia]=data.split('-') const dataLocal=new Date(Number(ano), Number(mes) - 1, Number(dia)) return dataLocal.toLocaleDateString('pt-BR')} catch (error){ console.warn('‚ö†Ô∏è Erro ao formatar data:', data, error) return data}}// üóëÔ∏è Fun√ß√µes de exclus√£oconst confirmarExclusao=(animalServico: AnimalServico): void=>{ const animalNome=getAnimalNome(animalServico) const servicoNome=getServicoDescricao(animalServico) const confirmacao=window.confirm( `üóëÔ∏è Tem certeza que deseja excluir este animal servi√ßo?\n\n` + `Animal: ${animalNome}\n` + `Servi√ßo: ${servicoNome}\n` + `Data: ${formatarData(animalServico.dataServico)}\n` + `Banhos utilizados: ${animalServico.banhosUsados}\n\n` + `‚ö†Ô∏è ATEN√á√ÉO: Esta a√ß√£o n√£o poder√° ser desfeita!\n` + `Todos os banhos individuais relacionados tamb√©m ser√£o exclu√≠dos.` ) if (confirmacao){ excluirAnimalServico(animalServico)}}const excluirAnimalServico=async (animalServico: AnimalServico): Promise<void>=>{ try{ loading.value=true console.log(`üóëÔ∏è Excluindo animal servi√ßo ID ${animalServico.id}...`) await animalServicoService.excluir(animalServico.id) console.log('‚úÖ Animal servi√ßo exclu√≠do com sucesso!') // Remover da lista local para feedback imediato const index=animalServicos.value.findIndex(as=>as.id===animalServico.id) if (index >-1){ animalServicos.value.splice(index, 1)} // Mostrar feedback de sucesso alert(`‚úÖ Animal servi√ßo de "${getAnimalNome(animalServico)}" foi exclu√≠do com sucesso!`) // Recarregar dados para garantir consist√™ncia await carregarAnimalServicos()} catch (error){ console.error('‚ùå Erro ao excluir animal servi√ßo:', error) alert(`‚ùå Erro ao excluir animal servi√ßo: ${error instanceof Error ? error.message : 'Erro desconhecido'}\n\nTente novamente.`)} finally{ loading.value=false}}// üìä Carregar dadosconst carregarAnimalServicos=async (): Promise<void>=>{ try{ loading.value=true error.value='' console.log('üîÑ Carregando animal servi√ßos e dados relacionados...') const [animalServicosData, clientesData, servicosData, usuariosData]=await Promise.all([ animalServicoService.buscarTodos(), clientesService.buscarTodos(), // üî• CORRE√á√ÉO: usar clientesService para obter dados completos servicosService.buscarTodos(), usuariosService.buscarTodos() ]) // üêï Extrai todos os animais dos clientes e adiciona refer√™ncia ao cliente const todosAnimais: any[]=[] clientesData.forEach((cliente: any)=>{ cliente.animais.forEach((animal: any)=>{ todosAnimais.push({ ...animal, cliente:{ id: cliente.id, nomeCompleto: cliente.nomeCompleto, cpf: cliente.cpf, codigoSimplesVet: cliente.codigoSimplesVet, codigoClienteSistema: cliente.codigoClienteSistema, telefones: cliente.telefones, emailClientes: cliente.emailClientes, animais: [] // Evita refer√™ncia circular}})})}) animalServicos.value=animalServicosData animais.value=todosAnimais // üî• CORRE√á√ÉO: usar animais com dados do cliente servicos.value=servicosData usuarios.value=usuariosData console.log(`‚úÖ Dados carregados:`) console.log(` - ${animalServicos.value.length} animal servi√ßos`) console.log(` - ${animais.value.length} animais (com dados dos donos)`) console.log(` - ${servicos.value.length} servi√ßos`) console.log(` - ${usuarios.value.length} usu√°rios`) // Debug: mostrar estrutura dos dados if (animalServicos.value.length >0){ console.log('üîç Estrutura do primeiro Animal Servi√ßo:', animalServicos.value[0])} if (animais.value.length >0){ console.log('üîç Estrutura do primeiro Animal (com cliente):', animais.value[0])}} catch (err){ console.error('‚ùå Erro ao carregar animal servi√ßos:', err) error.value='Erro ao carregar os dados. Tente novamente.'} finally{ loading.value=false}}const carregarMaisItens=(): void=>{ itensExibidos.value +=itensPorPagina.value}// üëÅÔ∏è Navega√ß√£o para detalhesconst verDetalhesAnimalServico=(animalServico: AnimalServico): void=>{ console.log('üîç Navegando para detalhes do Animal Servi√ßo:', animalServico.id) router.push(`/animal-servico/${animalServico.id}`)}// üõÅ Fun√ß√µes do modal de banhoconst abrirModalBanho=(animalServico: AnimalServico): void=>{ animalServicoSelecionado.value=animalServico formularioBanho.value={ dataBanho: new Date().toISOString().split('T')[0] || '', observacoes: ''} mostrarModalBanho.value=true}const salvarBanhoIndividual=async (): Promise<void>=>{ if (!animalServicoSelecionado.value || !formularioBanho.value.dataBanho) return try{ salvandoBanho.value=true // üîß Estrutura correta que o backend espera const dadosBanho={ animalServicoId: animalServicoSelecionado.value.id, dataBanho: formularioBanho.value.dataBanho, observacoes: formularioBanho.value.observacoes || null, usuarioId: null // Por enquanto sem usu√°rio espec√≠fico} console.log('üõÅ Enviando dados do banho:', dadosBanho) console.log('üîó URL da API:', 'http://localhost:8080/banho-individual') console.log('üîß Configura√ß√£o completa:', JSON.stringify(dadosBanho, null, 2)) // üîç Teste direto do endpoint console.log('üß™ Fazendo teste direto do fetch...') try{ const testeResponse=await fetch('http://localhost:8080/banho-individual',{ method: 'GET', headers:{ 'Content-Type': 'application/json'}}) console.log('üß™ Teste GET funcionou:', testeResponse.status)} catch (fetchError){ console.error('üß™ Teste GET falhou:', fetchError)} const resultado=await banhosIndividuaisService.criar(dadosBanho) console.log('‚úÖ Resultado do backend:', resultado) // Atualizar o contador de banhos usados localmente animalServicoSelecionado.value.banhosUsados=animalServicoSelecionado.value.banhosUsados + 1 mostrarModalBanho.value=false console.log('‚úÖ Banho individual registrado com sucesso!')} catch (error){ console.error('‚ùå Erro ao registrar banho:', error) alert('Erro ao registrar banho. Tente novamente.')} finally{ salvandoBanho.value=false}}// üëÄ Watchers// Resetar pagina√ß√£o quando filtro mudarwatch(filtroTexto, ()=>{ itensExibidos.value=itensPorPagina.value})// üîÑ LifecycleonMounted(()=>{ carregarAnimalServicos()})</script><style scoped>@keyframes fade-in-up{ from{ opacity: 0; transform: translateY(30px);} to{ opacity: 1; transform: translateY(0);}}.animate-fade-in-up{ animation: fade-in-up 0.6s ease-out forwards}@media (max-width: 640px){ .grid-cols-1{ grid-template-columns: 1fr;}}</style>